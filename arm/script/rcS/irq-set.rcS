#!/bin/bash
# Authors: Mohammad Alian <malian2@illinois.edu>
# boot gem5 and take a checkpoint
#
# The idea of this script is the same as
# "configs/boot/hack_back_ckpt.rcS" by Joel Hestness
# Please look into that for more info
#

grep eth0 /proc/interrupts
grep eth1 /proc/interrupts

cat /proc/irq/23/smp_affinity
cat /proc/irq/24/smp_affinity

echo 1 > /proc/irq/23/smp_affinity
echo 2 > /proc/irq/24/smp_affinity

cat /proc/irq/23/smp_affinity
cat /proc/irq/24/smp_affinity

/sbin/m5 exit 1


